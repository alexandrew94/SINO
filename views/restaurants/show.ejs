<% if (messages.successful) { %>
  <h2><%= messages.successful %></h2>
<% } %>
<h1><%- entry.name %></h1>
<h2>Name: <%- entry.name %></h2>
<p>Description: <%- entry.description %></p>
<% if (entry.user && locals.currentUser && entry.user.toString() === locals.currentUser.id) { %>
  <form action="/restaurants/<%= entry.id %>/edit" method="get">
    <button>Edit this restaurant</button>
    </form>
    <form action="/restaurants/<%= entry.id %>" method="post">
    <input type="hidden" name="_method" value="delete">
    <button>Delete this restaurant</button>
  </form>
<% } %>
<% entry.comments.forEach(comment => { %>
  <% if(comment.user) { %>
    <h5><%= comment.user.username %> said:</h5>
  <% } else { %>
    <h5>[Deleted User] said:</h5>
  <% } %>
  <p><%= comment.comment %></p>
  <% if(locals.isLoggedIn && comment.user._id.toString() === locals.currentUser._id.toString()) { %>
    <form action="/restaurants/<%= entry.id %>/comment/<%= comment.id %>" method="post">
      <input type="hidden" name="_method" value="delete">
      <button>Delete</button>
    </form>
  <% } %>
<% }) %>
<% if (locals.isLoggedIn) { %>
<form action="/restaurants/<%= entry.id %>/comment" method="post">
  <label for="comment_field">Add a comment:</label>
  <textarea name="comment" rows="10" cols="30" id="comment_field"></textarea>
  <button type="submit" name="button">Submit</button>
</form>
<% } else { %>
  <p><a href="/signin">Sign in</a> or <a href="/signup">Sign up</a> to post a comment.</p>
<% } %>
